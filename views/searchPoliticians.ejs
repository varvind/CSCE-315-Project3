<!DOCTYPE html>
<html lang="en">

<body>
    <div class="container" style = "margin-top:5%">
      <div class="row">
        <div class="col">
          <h2 style = "text-align: center;">Search Politicians</h2>
          <form method="GET" action = "/search">
            <center>
              <input class = "form-control-lg" type="text" style = "width:70%" name = "search" placeholder="Search Politicians or Leave Blank To Seach Through All Politicians"/>
              <div class="form-group" style = "margin-top:2%">
                <label for="exampleSelect1"><u>Party:</u></label>
                <select class="form-control" id="exampleSelect1" name = "party" style = "width:60%">
                  <option>All</option>
                  <option>Democrats</option>
                  <option>Republicans</option>
                </select>
              </div>

              <div class="form-group" style = "margin-top:2%">
                <label for="exampleSelect1"><u>Source:</u></label>
                <select class="form-control" id="exampleSelect1" name = "source" style = "width:60%">
                  <option>All</option>
                  <option>Twitter</option>
                  <option>New York Times</option>
                  <option>Five Thirty Eight</option>
                </select>
              </div>
              <button  type="submit" class="btn btn-outline-secondary" style = "margin-top: 1%;">Search</button>
            </center>
            
          </form>
        </div>
      </div>
      <% names.forEach(name => { %>
      <div class="row">
        <div class="col">
          <center>
          
            <h2 style = "margin-top:4%"><u><%= name %></u></h2>
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
                <% var j = 0 %> 
                <% for (var i = 0; i < tweets.length; i++) {%>
                  <% if (tweets[i].name == name) {%>
                    <% if(j == 0) { %>
                      <div class="carousel-item active">
                        <div class="card" style="width: 18rem;">
                          <div class="card-body">
                            <h5 class="card-title"><%=name%></h5>
                            <h6 class="card-subtitle mb-2 text-muted">@<%=tweets[i].uName%> <img src = "../img/twitter.png" style = "width:20px"></h6>
                            <p><%= tweets[i].tweet.text %> </p>
                          </div>
                        </div>
                      </div>
                    <% } else {%>
                      <div class="carousel-item">
                        <div class="card" style="width: 18rem;">
                          <div class="card-body">
                            <h5 class="card-title"><%=name%></h5>
                            <h6 class="card-subtitle mb-2 text-muted">@<%=tweets[i].uName%> <img src = "../img/twitter.png" style = "width:20px"></h6>
                            <p><%= tweets[i].tweet.text %> </p>
                          </div>
                        </div>
                      </div>
                    <% } %>
                    <% j++ %>
                  <% } %>
                <% } %>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
         
        </center>
        </div>
      </div>
      
      <% }) %>
      <% if(fivethirtyeightpolls.length != 0) { %>
        <h3 style = "text-align: center; text-decoration: underline; margin-top: 5%">Most Recent Polling Information</h3>
      <% } %> 
      <div class="row" style = "margin-top: 3%">
        <% if(fivethirtyeightpolls.length != 0) { %>
          <% fivethirtyeightpolls.forEach(pollData => { %>
            <div class="col">
              <h3><%=pollData.poll.Date %> </h3>
              <h6><%=pollData.poll.Candidate_1%> - <%=pollData.poll.Result_1%>  </h6>
              <h6><%=pollData.poll.Candidate_2%> - <%=pollData.poll.Result_2%>  </h6>
            </div>
          <% }) %> 
        <% } %> 
      </div>
    </div>
    <br>
    <br>
    <br>
</body>
</html>